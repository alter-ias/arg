<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IRONIUS - Periodismo Involuntario</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Chomsky&family=Prata&family=Roboto+Mono:wght@400;700&family=Oswald:wght@300;500;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        body {
            font-family: 'Roboto Mono', monospace;
            background-color: #f4f1ea;
            background-image: radial-gradient(#d1d1d1 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .font-headline {
            font-family: 'Prata', serif;
        }
        .font-body {
            font-family: 'Merriweather', serif;
        }
        .font-tabloid {
            font-family: 'Oswald', sans-serif;
        }
        .paper-shadow {
            box-shadow: 8px 8px 0px 0px rgba(0,0,0,1);
            border: 2px solid black;
        }
        .fade-in { animation: fadeIn 0.8s cubic-bezier(0.22, 1, 0.36, 1); }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Estilos selecci√≥n */
        .style-card.selected {
            background-color: #fef08a; /* yellow-200 */
            border-color: #000;
            transform: translate(-2px, -2px);
            box-shadow: 4px 4px 0px 0px #000;
        }
        .style-card {
            transition: all 0.2s;
        }
        /* Decoraci√≥n de texto period√≠stico */
        .drop-cap::first-letter {
            float: left;
            font-family: 'Chomsky', serif;
            font-size: 4.5rem;
            line-height: 0.8;
            padding-right: 12px;
            padding-top: 4px;
            color: #000;
        }
    </style>
</head>
<body class="text-black min-h-screen flex flex-col relative selection:bg-black selection:text-white">

    <header class="bg-black text-white border-b-4 border-black sticky top-0 z-30">
        <div class="bg-yellow-400 text-black text-xs font-bold py-1 overflow-hidden whitespace-nowrap border-b-2 border-black">
            <div class="inline-block animate-marquee px-4 uppercase tracking-widest font-mono">
                üö® √öLTIMA HORA: ESTUDIO REVELA QUE EL 90% DE LAS ESTAD√çSTICAS SON INVENTADAS EN EL MOMENTO ‚Äî ECONOM√çA: MILLENNIALS ARRUINAN LA INDUSTRIA DE LAS SERVILLETAS DE TELA ‚Äî CIENCIA: DESCUBREN QUE DORMIR ES LA √öNICA FORMA DE NO GASTAR DINERO ‚Äî
            </div>
        </div>

        <div class="max-w-6xl mx-auto px-4 py-6 flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-4">
                <div class="bg-white text-black p-2 border-2 border-black rotate-[-2deg] shadow-[4px_4px_0px_white]">
                    <i class="ph-fill ph-newspaper text-4xl"></i>
                </div>
                <div>
                    <h1 class="text-5xl md:text-7xl font-headline tracking-tighter leading-none">IRONIUS</h1>
                    <p class="text-xs md:text-sm text-gray-400 font-mono uppercase tracking-widest mt-1">Periodismo de Alta Fidelidad (Baja Realidad)</p>
                </div>
            </div>
            
            <div class="flex flex-col items-end text-right border-l-2 border-gray-800 pl-4">
                <div class="text-[10px] font-mono text-gray-400 uppercase">Fundado en 1894 (Mentira)</div>
                <div class="text-xs font-bold text-yellow-500 uppercase mt-1">Precio: Tu Atenci√≥n</div>
                <div class="text-[10px] font-mono text-gray-500">Vol. CDIV | No. 001</div>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8 w-full flex-grow">
        
        <div class="lg:col-span-4 space-y-6">
            
            <div class="bg-white p-6 paper-shadow relative">
                <div class="absolute -top-3 -right-3 bg-red-600 text-white text-[10px] font-bold px-2 py-1 rotate-12 border border-black z-10 shadow-sm">
                    SISTEMA PATENTADO
                </div>

                <label class="block text-sm font-black font-tabloid uppercase mb-2 bg-black text-white inline-block px-2 transform -rotate-1">
                    1. El Hecho (o la V√≠ctima)
                </label>
                <textarea
                    id="topicInput"
                    rows="3"
                    placeholder="Ej. La fila del SAT, Los precios de la gentrificaci√≥n, El nuevo iPhone 25..."
                    class="w-full bg-gray-50 border-2 border-black text-black text-lg font-mono p-4 mb-6 focus:bg-yellow-50 focus:outline-none focus:ring-2 focus:ring-black placeholder-gray-400 resize-none"
                ></textarea>

                <label class="block text-sm font-black font-tabloid uppercase mb-3 bg-black text-white inline-block px-2 transform rotate-1">
                    2. Lente Editorial
                </label>
                <div class="grid grid-cols-1 gap-3 mb-6">
                    
                    <button onclick="selectStyle('institucional')" id="style-institucional" class="style-card flex items-center gap-3 p-3 border-2 border-gray-200 hover:border-black text-left group selected cursor-pointer">
                        <div class="bg-black text-white p-2 border border-black min-w-[40px] text-center"><i class="ph-bold ph-bank"></i></div>
                        <div>
                            <div class="text-sm font-bold font-tabloid uppercase">Institucional Absurdo</div>
                            <div class="text-[10px] font-mono leading-tight text-gray-600">La burocracia llevada al extremo l√≥gico. Tono oficialista.</div>
                        </div>
                    </button>
                    
                    <button onclick="selectStyle('costumbrista')" id="style-costumbrista" class="style-card flex items-center gap-3 p-3 border-2 border-gray-200 hover:border-black text-left group cursor-pointer">
                        <div class="bg-black text-white p-2 border border-black min-w-[40px] text-center"><i class="ph-bold ph-users-three"></i></div>
                        <div>
                            <div class="text-sm font-bold font-tabloid uppercase">Tragedia Cotidiana</div>
                            <div class="text-[10px] font-mono leading-tight text-gray-600">Dramatizar problemas del primer mundo. Tono melodram√°tico.</div>
                        </div>
                    </button>

                    <button onclick="selectStyle('cientifico')" id="style-cientifico" class="style-card flex items-center gap-3 p-3 border-2 border-gray-200 hover:border-black text-left group cursor-pointer">
                        <div class="bg-black text-white p-2 border border-black min-w-[40px] text-center"><i class="ph-bold ph-flask"></i></div>
                        <div>
                            <div class="text-sm font-bold font-tabloid uppercase">Estudio Cient√≠fico</div>
                            <div class="text-[10px] font-mono leading-tight text-gray-600">Datos duros inventados y correlaciones falsas.</div>
                        </div>
                    </button>
                </div>

                <button
                    onclick="generateContent()"
                    id="generateBtn"
                    class="w-full flex items-center justify-center gap-2 bg-black hover:bg-gray-800 text-white font-black font-tabloid tracking-widest text-xl py-4 border-2 border-transparent shadow-[4px_4px_0px_0px_#fbbf24] active:translate-y-1 active:shadow-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                >
                    <i class="ph-bold ph-printer"></i> IMPRIMIR VERDAD
                </button>
            </div>
            
            <div class="bg-[#e5e5e5] p-4 paper-shadow text-center opacity-80 border-dashed border-2 border-gray-400">
                <p class="text-[9px] font-bold uppercase mb-2 text-gray-500 tracking-widest">Publicidad</p>
                <h4 class="font-headline font-bold text-lg leading-tight">VENDO OPEL CORSA '98</h4>
                <p class="font-mono text-[10px] mt-2 text-gray-600">"Hace ruidos raros pero tiene personalidad."</p>
                <p class="font-mono text-[10px] text-gray-600">Trato serio.</p>
            </div>
        </div>

        <div class="lg:col-span-8">
            
            <div id="emptyState" class="h-full min-h-[500px] flex flex-col items-center justify-center bg-white paper-shadow p-12 text-center opacity-90 relative overflow-hidden">
                <div class="absolute inset-0 opacity-[0.05] pointer-events-none" style="background-image: url('https://www.transparenttextures.com/patterns/lined-paper.png');"></div>
                
                <div class="bg-gray-50 p-6 rounded-full mb-6 border-2 border-dashed border-gray-300">
                    <i class="ph-duotone ph-typewriter text-6xl text-gray-400"></i>
                </div>
                <h3 class="text-3xl font-headline font-bold mb-3">Redacci√≥n Vac√≠a</h3>
                <p class="font-mono text-sm text-gray-500 max-w-md mx-auto leading-relaxed">
                    Nuestros redactores est√°n procrastinando. Dales un tema (ej: <span class="bg-yellow-200 px-1 text-black font-bold">"El tr√°fico"</span>) para obligarlos a trabajar usando nuestra estricta metodolog√≠a de iron√≠a estructural.
                </p>
            </div>

            <div id="loadingState" class="hidden h-full min-h-[500px] flex flex-col items-center justify-center bg-[#fffdf5] paper-shadow p-10 text-center relative border-t-8 border-yellow-400">
                <div class="relative mb-8">
                    <div class="w-24 h-24 border-8 border-gray-200 border-t-black rounded-full animate-spin"></div>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <i class="ph-fill ph-pencil-simple text-black text-3xl animate-pulse"></i>
                    </div>
                </div>
                <h3 class="text-2xl font-bold font-tabloid uppercase tracking-widest mb-2" id="loadingText">Inventando Hechos...</h3>
                <div class="text-xs font-mono text-gray-500 space-y-1">
                    <p>Consultando fuentes inexistentes...</p>
                    <p>Tergiversando declaraciones...</p>
                    <p>Ajustando la realidad...</p>
                </div>
            </div>

            <div id="resultState" class="hidden bg-[#fffdf5] paper-shadow flex flex-col min-h-[600px] fade-in relative">
                
                <div class="border-b border-black p-1 flex justify-between items-center bg-gray-100">
                    <div class="font-mono text-[10px] uppercase tracking-widest px-2 text-gray-500">Secci√≥n: <span id="sectionLabel" class="text-black font-bold">NACIONAL</span></div>
                    <div class="font-mono text-[10px] uppercase px-2 text-gray-400">Lectura: 3 min</div>
                </div>

                <div class="p-8 md:p-16 relative z-10 font-body">
                    
                    <header class="mb-10 text-center">
                        <h2 class="font-headline text-4xl md:text-5xl lg:text-6xl font-bold leading-[1.05] mb-6 text-gray-900 tracking-tight" id="resultTitle">
                            TITULAR DE LA NOTICIA
                        </h2>
                        
                        <div class="flex justify-center mb-6">
                            <div class="w-24 h-1 bg-black"></div>
                        </div>

                        <h3 class="font-sans text-lg md:text-xl text-gray-600 leading-normal max-w-2xl mx-auto italic" id="resultSubtitle">
                            Subt√≠tulo que ampl√≠a la iron√≠a y prepara el terreno para el absurdo.
                        </h3>
                    </header>

                    <div class="flex items-center justify-between text-xs font-mono text-gray-500 border-y border-gray-200 py-3 mb-8">
                        <span class="font-bold text-black uppercase flex items-center gap-1">
                            <i class="ph-bold ph-map-pin"></i> <span id="resultLocation">CDMX</span>
                        </span>
                        <span class="uppercase tracking-wider">Por <span class="font-bold text-black border-b border-black" id="resultAuthor">Staff</span></span>
                        <span>Hace 2 horas</span>
                    </div>
                    
                    <article id="resultContent" class="space-y-6 text-gray-800 leading-relaxed text-lg">
                        </article>

                    <div class="mt-12 pt-8 border-t-2 border-black flex items-center justify-center gap-4 opacity-50">
                        <i class="ph-fill ph-share-network text-2xl"></i>
                        <span class="font-mono text-xs uppercase">Compartir esta desinformaci√≥n</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-black text-gray-400 py-12 mt-8 font-mono text-xs border-t-8 border-yellow-400">
        <div class="max-w-4xl mx-auto text-center px-4">
            <h2 class="text-2xl font-headline text-white mb-4">IRONIUS MEDIA GROUP</h2>
            <p class="mb-6 max-w-md mx-auto">"Dedicados a la noble tarea de confundir a la opini√≥n p√∫blica con verdades que deber√≠an ser mentiras y viceversa."</p>
            <div class="flex justify-center gap-6 mb-8 text-white">
                <a href="#" class="hover:text-yellow-400 underline decoration-dotted">T√©rminos de Servicio (Nadie los lee)</a>
                <a href="#" class="hover:text-yellow-400 underline decoration-dotted">Pol√≠tica de Privacidad (Inexistente)</a>
                <a href="#" class="hover:text-yellow-400 underline decoration-dotted">Cont√°ctanos (No respondemos)</a>
            </div>
            <p class="text-[10px] opacity-30">¬© 2024 Ironius. Todos los derechos reservados por nadie.</p>
        </div>
    </footer>

    <script>
        // ==========================================
        // CONFIGURACI√ìN DE IRON√çA ESTRUCTURAL
        // ==========================================
        const POLLINATIONS_URL = "https://text.pollinations.ai/openai"; 
        
        let currentStyle = 'institucional';

        // DEFINICI√ìN DE PERSONAS BASADAS EN EL DOCUMENTO GU√çA
        // Clave: Mantener la seriedad (Deadpan) y la l√≥gica interna absurda.
        const PERSONAS = {
            institucional: {
                label: "BUROCRACIA",
                role: "Eres un redactor senior de pol√≠tica econ√≥mica. Tu especialidad es explicar el caos burocr√°tico como si fuera un plan maestro brillante.",
                tone: "Formal, t√©cnico, condescendiente y extremadamente serio. Usas lenguaje corporativo para justificar locuras.",
                instruction: "Regla 1: Valida el absurdo con una instituci√≥n real (SAT, IMSS, Gobierno). Regla 2: Cita a un 'Vocero Oficial' que d√© una excusa rid√≠culamente l√≥gica. Regla 3: El problema no es el sistema, es el usuario."
            },
            costumbrista: {
                label: "SOCIEDAD",
                role: "Eres un antrop√≥logo social deprimido que escribe cr√≥nicas urbanas.",
                tone: "Melanc√≥lico, observador detallista, tr√°gico. Tratas una molestia menor (tr√°fico, lluvia, internet lento) como una crisis humanitaria.",
                instruction: "Regla 1: Exagera las consecuencias emocionales (ej. 'la p√©rdida de esperanza al ver el metro lleno'). Regla 2: Entrevista a una 'v√≠ctima' en la calle que diga algo obvio pero profundo. Regla 3: Usa met√°foras apocal√≠pticas."
            },
            cientifico: {
                label: "CIENCIA Y SALUD",
                role: "Eres un divulgador cient√≠fico que malinterpreta todos los estudios.",
                tone: "Anal√≠tico, basado en datos (falsos), alarmista pero con vocabulario acad√©mico.",
                instruction: "Regla 1: Inventa un porcentaje espec√≠fico (ej. 'El 87.4% de los mexicanos...'). Regla 2: Establece una correlaci√≥n falsa (Causa -> Efecto absurdo). Regla 3: Cita a la 'Universidad de [Lugar Random]' para dar autoridad."
            }
        };

        // --- UI LOGIC ---

        function selectStyle(style) {
            currentStyle = style;
            document.querySelectorAll('.style-card').forEach(el => el.classList.remove('selected'));
            document.getElementById(`style-${style}`).classList.add('selected');
        }

        async function generateContent() {
            const topic = document.getElementById('topicInput').value.trim();
            if (!topic) {
                alert("‚ö†Ô∏è Error de Capa 8: El usuario no ingres√≥ un tema.");
                return;
            }

            // UI State Transition
            document.getElementById('emptyState').classList.add('hidden');
            document.getElementById('resultState').classList.add('hidden');
            document.getElementById('loadingState').classList.remove('hidden');
            
            const btn = document.getElementById('generateBtn');
            btn.disabled = true;
            btn.innerHTML = '<i class="ph-bold ph-spinner animate-spin"></i> PROCESANDO MENTIRAS...';
            
            try {
                await callIroniusAI(topic);
            } catch (error) {
                console.error(error);
                alert("Nuestros servidores est√°n en huelga. Intenta de nuevo.");
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('emptyState').classList.remove('hidden');
            } finally {
                btn.disabled = false;
                btn.innerHTML = '<i class="ph-bold ph-printer"></i> IMPRIMIR VERDAD';
            }
        }

        async function callIroniusAI(topic) {
            const persona = PERSONAS[currentStyle];
            document.getElementById('sectionLabel').innerText = persona.label;

            const systemPrompt = `
                ROL: ${persona.role}
                TONO: ${persona.tone}
                REGLAS DE ORO: ${persona.instruction}
                
                OBJETIVO: Escribir una NOTICIA SAT√çRICA (Estilo The Onion / El Deforma).
                CLAVE DEL √âXITO: La noticia debe parecer 100% real en su estructura y redacci√≥n. El humor viene de que el contenido es l√≥gicamente posible pero moral o pr√°cticamente absurdo. NO uses "jaja", NO rompas la cuarta pared.
                
                FORMATO DE RESPUESTA (JSON PURO):
                {
                   "headline": "Titular impactante y serio (Max 12 palabras)",
                   "subtitle": "Bajada que explica la premisa ir√≥nica",
                   "location": "Ciudad de M√©xico / Monterrey / Guadalajara (o relevante al tema)",
                   "author": "Nombre y Cargo Ficticio (ej. 'Lic. Valeriano, Corresponsal de Baches')",
                   "body": [
                       {"type": "p", "content": "P√°rrafo introductorio (Lead). Qui√©n, qu√©, d√≥nde, cu√°ndo. Establece la premisa absurda como un hecho irrefutable."},
                       {"type": "p", "content": "Contexto o datos duros inventados. Usa porcentajes o nombres de leyes ficticias que suenen reales."},
                       {"type": "quote", "speaker": "Nombre de Autoridad/V√≠ctima", "role": "Cargo rimbombante", "text": "Una cita textual que confirme la locura de la noticia con total seriedad."},
                       {"type": "p", "content": "Desarrollo de las consecuencias. ¬øC√≥mo afecta esto a la sociedad? Exageraci√≥n l√≥gica."},
                       {"type": "p", "content": "Conclusi√≥n pesimista o circular."}
                   ]
                }
                
                IDIOMA: Espa√±ol de M√©xico (Neutro pero con modismos si el contexto lo pide).
                LONGITUD: S√© descriptivo. M√≠nimo 400 palabras de contenido total.
            `.trim();

            const userPrompt = `Tema de la noticia: "${topic}". Escribe la nota ahora.`;

            const response = await fetch(POLLINATIONS_URL, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    messages: [
                        { role: "system", content: systemPrompt },
                        { role: "user", content: userPrompt }
                    ],
                    model: "openai",
                    jsonMode: true,
                    seed: Math.floor(Math.random() * 1000000)
                })
            });

            if (!response.ok) throw new Error("Error en la API");
            
            const data = await response.json();
            const content = data.choices[0].message.content;
            
            // Limpieza b√°sica de JSON por si la IA a√±ade markdown
            const cleanJson = content.replace(/```json/g, '').replace(/```/g, '').trim();
            const parsedData = JSON.parse(cleanJson);

            renderNews(parsedData);
            
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('resultState').classList.remove('hidden');
        }

        function renderNews(data) {
            document.getElementById('resultTitle').innerText = data.headline;
            document.getElementById('resultSubtitle').innerText = data.subtitle;
            document.getElementById('resultLocation').innerText = data.location.toUpperCase();
            document.getElementById('resultAuthor').innerText = data.author;

            const container = document.getElementById('resultContent');
            container.innerHTML = '';
            
            data.body.forEach((block, index) => {
                if (block.type === 'quote') {
                    container.innerHTML += `
                        <div class="my-8 pl-6 border-l-4 border-yellow-400 italic bg-gray-50 p-4 rounded-r-lg">
                            <p class="font-headline text-xl md:text-2xl text-black mb-2">"${block.text}"</p>
                            <p class="font-sans text-xs font-bold text-gray-500 uppercase tracking-wider">‚Äî ${block.speaker}, <span class="text-gray-400 font-normal">${block.role}</span></p>
                        </div>
                    `;
                } else {
                    // Dropcap para el primer p√°rrafo
                    const classes = index === 0 ? "drop-cap mb-6" : "mb-6";
                    container.innerHTML += `<p class="${classes}">${block.content}</p>`;
                }
            });
        }
    </script>
</body>
</html>
