<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IRONIUS - La Verdad (aunque duela)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Chomsky&family=Prata&family=Roboto+Mono:wght@400;700&family=Oswald:wght@300;500;700&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        body {
            font-family: 'Roboto Mono', monospace;
            background-color: #f4f1ea; /* Color papel viejo */
            background-image: radial-gradient(#d1d1d1 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .font-headline {
            font-family: 'Prata', serif;
        }
        .font-tabloid {
            font-family: 'Oswald', sans-serif;
        }
        .paper-shadow {
            box-shadow: 10px 10px 0px 0px rgba(0,0,0,1);
            border: 2px solid black;
        }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Estilos selecci√≥n */
        .style-card.selected {
            background-color: #fef08a; /* Amarillo post-it */
            border-color: #000;
            transform: translate(-4px, -4px);
            box-shadow: 4px 4px 0px 0px #000;
        }
        .style-card {
            transition: all 0.2s;
        }
    </style>
</head>
<body class="text-black min-h-screen flex flex-col relative selection:bg-yellow-300">

    <header class="bg-black text-white border-b-4 border-black sticky top-0 z-20">
        <div class="bg-yellow-400 text-black text-xs font-bold py-1 overflow-hidden whitespace-nowrap border-b-2 border-black">
            <div class="inline-block animate-marquee px-4 uppercase tracking-widest">
                üö® √öLTIMA HORA: Cient√≠ficos confirman que la quincena dura menos cada mes ‚Äî El gato del vecino planea dominar el mundo ‚Äî Se proh√≠be estar triste en horario laboral ‚Äî
            </div>
        </div>

        <div class="max-w-6xl mx-auto px-4 py-6 flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-4">
                <div class="bg-white text-black p-2 border-2 border-black rotate-3">
                    <i class="ph-fill ph-newspaper-clipping text-4xl"></i>
                </div>
                <div>
                    <h1 class="text-5xl md:text-6xl font-headline tracking-tighter leading-none">IRONIUS</h1>
                    <p class="text-xs md:text-sm text-gray-400 font-mono uppercase tracking-widest mt-1">"Verdad √°cida para gente dulce"</p>
                </div>
            </div>
            
            <div class="flex flex-col items-end">
                <div class="text-xs font-bold bg-red-600 text-white px-2 py-1 rotate-[-2deg] mb-1">EDICI√ìN GRATUITA</div>
                <div class="text-[10px] font-mono text-gray-400">VOL. 666 | PRECIO: TU ALMA</div>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8 w-full flex-grow">
        
        <div class="lg:col-span-4 space-y-6">
            
            <div class="bg-white p-6 paper-shadow">
                
                <label class="block text-sm font-black font-tabloid uppercase mb-2 bg-black text-white inline-block px-2 transform -rotate-1">
                    1. ¬øCu√°l es el chisme hoy?
                </label>
                <textarea
                    id="topicInput"
                    rows="3"
                    placeholder="Ej. Los pol√≠ticos se subieron el sueldo, Mi ex volvi√≥ con su ex, El precio del lim√≥n..."
                    class="w-full bg-gray-100 border-2 border-black text-black text-lg font-mono p-4 mb-6 focus:bg-yellow-50 focus:outline-none focus:ring-0 placeholder-gray-500 resize-none"
                ></textarea>

                <label class="block text-sm font-black font-tabloid uppercase mb-3 bg-black text-white inline-block px-2 transform rotate-1">
                    2. Elige al Redactor
                </label>
                <div class="grid grid-cols-1 gap-3 mb-6">
                    
                    <button onclick="selectStyle('barrio')" id="style-barrio" class="style-card flex items-center gap-3 p-3 border-2 border-gray-300 hover:border-black text-left group selected">
                        <div class="bg-black text-white p-2 border border-black"><i class="ph-fill ph-speaker-high"></i></div>
                        <div>
                            <div class="text-sm font-bold font-tabloid uppercase">El √ëero (Barrio)</div>
                            <div class="text-[10px] font-mono">Lenguaje florido, directo y sin filtro.</div>
                        </div>
                    </button>

                    <button onclick="selectStyle('satira')" id="style-satira" class="style-card flex items-center gap-3 p-3 border-2 border-gray-300 hover:border-black text-left group">
                        <div class="bg-black text-white p-2 border border-black"><i class="ph-fill ph-mask-happy"></i></div>
                        <div>
                            <div class="text-sm font-bold font-tabloid uppercase">El S√°tira Pol√≠tica</div>
                            <div class="text-[10px] font-mono">C√≠nico, intelectualoide y amargado.</div>
                        </div>
                    </button>
                    
                    <button onclick="selectStyle('tia')" id="style-tia" class="style-card flex items-center gap-3 p-3 border-2 border-gray-300 hover:border-black text-left group">
                        <div class="bg-black text-white p-2 border border-black"><i class="ph-fill ph-whatsapp-logo"></i></div>
                        <div>
                            <div class="text-sm font-bold font-tabloid uppercase">La T√≠a del Whats</div>
                            <div class="text-[10px] font-mono">Alarmista, religiosa y llena de emojis.</div>
                        </div>
                    </button>

                    <button onclick="selectStyle('nota_roja')" id="style-nota_roja" class="style-card flex items-center gap-3 p-3 border-2 border-gray-300 hover:border-black text-left group">
                        <div class="bg-black text-white p-2 border border-black"><i class="ph-fill ph-siren"></i></div>
                        <div>
                            <div class="text-sm font-bold font-tabloid uppercase">La Nota Roja</div>
                            <div class="text-[10px] font-mono">Sensacionalista, TR√ÅGICO y exagerado.</div>
                        </div>
                    </button>
                </div>

                <button
                    onclick="generateContent()"
                    id="generateBtn"
                    class="w-full flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 text-white font-black font-tabloid tracking-widest text-xl py-4 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] active:translate-y-1 active:shadow-none transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                >
                    <i class="ph-bold ph-printer"></i> ¬°IMPRIMIR BASURA!
                </button>
            </div>
        </div>

        <div class="lg:col-span-8">
            
            <div id="emptyState" class="h-full min-h-[500px] flex flex-col items-center justify-center bg-white paper-shadow p-10 text-center opacity-80" style="background-image: url('https://www.transparenttextures.com/patterns/dust.png');">
                <div class="bg-gray-100 p-6 rounded-full mb-6 border-2 border-dashed border-gray-400">
                    <i class="ph-duotone ph-article text-5xl text-gray-400"></i>
                </div>
                <h3 class="text-2xl font-headline font-bold mb-2">P√°gina en Blanco</h3>
                <p class="font-mono text-sm text-gray-500 max-w-sm mx-auto">
                    La rotativa est√° detenida. Danos un chisme sabroso para empezar a tirar veneno.
                </p>
            </div>

            <div id="loadingState" class="hidden h-full min-h-[500px] flex flex-col items-center justify-center bg-yellow-50 paper-shadow p-10 text-center">
                <div class="relative mb-6">
                    <div class="w-20 h-20 border-8 border-black border-t-yellow-500 rounded-full animate-spin"></div>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <i class="ph-fill ph-pencil-simple-slash text-black text-2xl animate-bounce"></i>
                    </div>
                </div>
                <h3 class="text-xl font-bold font-tabloid uppercase tracking-wider" id="loadingText">Inventando los hechos...</h3>
                <p class="text-xs font-mono mt-2 text-gray-600">Consultando a nuestras fuentes (o sea, Wikipedia y Twitter)</p>
            </div>

            <div id="resultState" class="hidden bg-[#fffdf5] paper-shadow flex flex-col min-h-[600px] fade-in relative">
                <div class="absolute inset-0 opacity-5 pointer-events-none flex items-center justify-center overflow-hidden">
                    <span class="text-[150px] font-black -rotate-45">IRONIUS</span>
                </div>

                <div class="bg-black text-white px-4 py-2 flex justify-between items-center border-b-2 border-black">
                    <div class="font-mono text-xs text-yellow-400">SECCI√ìN: <span id="sectionLabel">OPINI√ìN</span></div>
                    <button onclick="copyToClipboard()" class="text-xs font-bold hover:text-yellow-400 flex items-center gap-1">
                        <i class="ph-bold ph-copy"></i> COPIAR TEXTO
                    </button>
                </div>

                <div class="p-8 md:p-12 relative z-10">
                    <div class="border-b-4 border-black pb-4 mb-6">
                        <h2 class="font-headline text-4xl md:text-5xl font-bold leading-tight mb-4" id="resultTitle">
                            TITULAR SENSACIONALISTA AQU√ç
                        </h2>
                        <div class="flex justify-between items-center text-xs font-mono text-gray-500 border-t border-gray-300 pt-2">
                            <span>POR: LA IA RESENTIDA</span>
                            <span>FECHA: HOY (CREO)</span>
                        </div>
                    </div>
                    
                    <div id="resultContent" class="space-y-6">
                        </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-black text-gray-500 text-center py-6 mt-8 font-mono text-xs">
        <p>IRONIUS ¬© 2024. Cualquier parecido con la realidad es mera coincidencia (y mala suerte).</p>
    </footer>

    <script>
        // ==========================================
        // L√ìGICA DE IRONIUS
        // ==========================================
        const POLLINATIONS_URL = "https://text.pollinations.ai/openai"; 
        
        let currentStyle = 'barrio';

        // DEFINICI√ìN DE REDACTORES (PERSONAS C√ìMICAS)
        const PERSONAS = {
            barrio: {
                name: "EL √ëERO",
                role: "Eres un cronista de barrio bravo mexicano.",
                tone: "Usas mucho slang (qu√© pach√≥, sim√≥n, chale, c√°mara), eres dicharachero, usas albures ligeros. Te burlas de la 'gente fresa'. Eres la voz del pueblo.",
                instruction: "Transforma la noticia en un chisme de vecindad. Exagera todo."
            },
            satira: {
                name: "EL POL√çTICO",
                role: "Eres un cr√≠tico pol√≠tico amargado y sarc√°stico.",
                tone: "Usas iron√≠a fina, palabras rimbombantes para insultar, referencias a la corrupci√≥n, al 'sistema' y a la incompetencia. Eres pesimista.",
                instruction: "Haz una s√°tira pol√≠tica. Culpa al gobierno o a la oposici√≥n de todo, aunque sea absurdo."
            },
            tia: {
                name: "LA T√çA PANISTA",
                role: "Eres una t√≠a conservadora enviando cadenas de WhatsApp.",
                tone: "Alarmista, usas MUCHOS EMOJIS, escribes en MAY√öSCULAS a veces. Todo es culpa del 'degenere social' o del comunismo. Bendiciones al final.",
                instruction: "Convierte la noticia en una cadena de oraci√≥n o una advertencia apocal√≠ptica absurda."
            },
            nota_roja: {
                name: "EL ALARMA",
                role: "Eres un redactor de peri√≥dico amarillista sangriento (estilo El Alarma!).",
                tone: "SENSACIONALISTA. Usas t√≠tulos como '¬°MACABRO HALLAZGO!'. Eres morboso pero con humor negro involuntario.",
                instruction: "Haz que la noticia parezca una tragedia griega pero cutre."
            }
        };

        // --- INTERFAZ ---

        function selectStyle(style) {
            currentStyle = style;
            document.querySelectorAll('.style-card').forEach(el => el.classList.remove('selected'));
            document.getElementById(`style-${style}`).classList.add('selected');
        }

        // --- GENERACI√ìN ---

        async function generateContent() {
            const topic = document.getElementById('topicInput').value.trim();
            if (!topic) return alert("¬°Escribe algo, no soy adivino!");

            // UI Changes
            document.getElementById('emptyState').classList.add('hidden');
            document.getElementById('resultState').classList.add('hidden');
            document.getElementById('loadingState').classList.remove('hidden');
            document.getElementById('generateBtn').disabled = true;
            document.getElementById('generateBtn').innerText = "ESPERA, ESTOY PENSANDO...";
            
            try {
                await callIroniusAI(topic);
            } catch (error) {
                console.error(error);
                alert("Se cay√≥ el sistema (como en el 88). Intenta de nuevo.");
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('emptyState').classList.remove('hidden');
            } finally {
                const btn = document.getElementById('generateBtn');
                btn.disabled = false;
                btn.innerHTML = '<i class="ph-bold ph-printer"></i> ¬°IMPRIMIR BASURA!';
            }
        }

        async function callIroniusAI(topic) {
            const persona = PERSONAS[currentStyle];
            document.getElementById('sectionLabel').innerText = persona.name;

            const systemPrompt = `
                ${persona.role}
                TU TONO: ${persona.tone}
                INSTRUCCI√ìN: ${persona.instruction}
                
                OBJETIVO: Escribir un art√≠culo corto y muy gracioso para el peri√≥dico sat√≠rico 'IRONIUS'.
                
                REGLAS ESTRICTAS DE JSON:
                1. Responde SOLO con JSON v√°lido.
                2. Estructura:
                   {
                     "title": "Un titular MUY LLAMATIVO, GRACIOSO y SARC√ÅSTICO",
                     "body": [
                       {"type": "p", "content": "P√°rrafo de texto narrativo"},
                       {"type": "quote", "content": "Una cita inventada y rid√≠cula de alguien involucrado"},
                       {"type": "p", "content": "Conclusi√≥n ir√≥nica o remate c√≥mico"}
                     ]
                   }
                3. S√© breve (m√°ximo 150 palabras en total).
                4. Usa humor mexicano/latino.
            `.trim();

            const userPrompt = `La noticia o tema es: "${topic}". ¬°Destr√∫yelo con humor!`;

            const response = await fetch(POLLINATIONS_URL, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    messages: [
                        { role: "system", content: systemPrompt },
                        { role: "user", content: userPrompt }
                    ],
                    model: "openai",
                    jsonMode: true,
                    seed: Math.floor(Math.random() * 1000)
                })
            });

            if (!response.ok) throw new Error(`Error ${response.status}`);
            
            const data = await response.json();
            const aiContent = data.choices[0].message.content;

            // Parseo seguro
            let parsedResult;
            try {
                const cleanJson = aiContent.replace(/```json/g, '').replace(/```/g, '').trim();
                parsedResult = JSON.parse(cleanJson);
            } catch (e) {
                // Fallback si la IA falla el JSON
                parsedResult = {
                    title: "¬°LA IA SE VOLVI√ì LOCA!",
                    body: [
                        { type: "p", content: aiContent }
                    ]
                };
            }

            renderResult(parsedResult);
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('resultState').classList.remove('hidden');
        }

        function renderResult(data) {
            document.getElementById('resultTitle').innerText = data.title;
            const container = document.getElementById('resultContent');
            container.innerHTML = '';
            
            // Texto para copiar
            let copyText = `${data.title}\n\n`;

            data.body.forEach(block => {
                copyText += `${block.content}\n\n`;

                if (block.type === 'quote') {
                    // Estilo de Cita Destacada
                    container.innerHTML += `
                        <div class="my-6 border-l-4 border-yellow-400 pl-4 py-2 bg-gray-50 italic font-headline text-xl text-gray-800">
                            "${block.content}"
                        </div>
                    `;
                } else {
                    // P√°rrafo normal con letra capital simulada si es el primero
                    container.innerHTML += `
                        <p class="font-mono text-lg leading-relaxed text-gray-800 mb-4 first-letter:text-5xl first-letter:font-bold first-letter:text-black first-letter:mr-2 first-letter:float-left">
                            ${block.content}
                        </p>
                    `;
                }
            });

            // Guardamos el texto limpio para el bot√≥n de copiar
            window.currentCopyText = copyText + "\nLe√≠do en IRONIUS.";
        }

        function copyToClipboard() {
            if (!window.currentCopyText) return;
            navigator.clipboard.writeText(window.currentCopyText).then(() => {
                alert("¬°Copiado! Ahora p√©galo en Twitter o m√°ndaselo a tu t√≠a.");
            });
        }
    </script>
</body>
</html>
