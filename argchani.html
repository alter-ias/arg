<!DOCTYPE html>
<html lang="es">
<head>
    <!-- (Tu <head> se mantiene igual) -->
</head>
<body>

    <header>
        <!-- (Tu <header> se mantiene igual, con todos los nav-item y mega-menu) -->
        <!-- IMPORTANTE: El contenido del mega menú de "Ecos en las Ruinas" ahora estará vacío -->
        <nav class="main-nav">
             <ul>
                 <li class="nav-item">
                     <a href="#ecos-ruinas">Ecos en las Ruinas</a>
                     <div class="mega-menu">
                         <!-- Este div se llenará dinámicamente -->
                         <div class="mega-menu-content" id="ecos-ruinas-content"></div>
                     </div>
                 </li>
                 <!-- (Resto de los elementos del menú sin cambios) -->
             </ul>
        </nav>
    </header>

    <main>
        <!-- (Aquí irá el resto del contenido de tu página en el futuro) -->
    </main>

    <div id="text-modal-container" class="modal-container">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <h2 id="modal-title"></h2>
            <div id="modal-body"></div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const textModal = {
                container: document.getElementById('text-modal-container'),
                title: document.getElementById('modal-title'),
                body: document.getElementById('modal-body'),
                open(title, content) { /* ... */ },
                close() { /* ... */ }
            };
            
            const closeModalButton = document.querySelector('.modal-close');
            if(closeModalButton) closeModalButton.addEventListener('click', () => textModal.close());
            
            // Función para añadir listeners a los botones del modal
            function attachModalListeners() {
                document.querySelectorAll('.btn-modal').forEach(button => {
                    button.addEventListener('click', (e) => {
                        e.stopPropagation();
                        textModal.open(button.dataset.title, button.dataset.content);
                    });
                });
            }

            // --- NUEVO: Cargar y mostrar las entradas dinámicamente ---
            async function loadEntries() {
                try {
                    const response = await fetch('./data/datosarg.json');
                    const data = await response.json();
                    
                    const ecosRuinasContainer = document.getElementById('ecos-ruinas-content');
                    if (ecosRuinasContainer && data['ecos-ruinas']) {
                        let contentHTML = '';
                        data['ecos-ruinas'].forEach(post => {
                            contentHTML += `
                                <div class="menu-item">
                                    <img src="${post.imagenUrl}" alt="">
                                    <h3>${post.titulo}</h3>
                                    <button class="btn btn-modal" 
                                            data-title="${post.titulo}" 
                                            data-content='${post.contenido}'>
                                        Ver Entrada
                                    </button>
                                </div>
                            `;
                        });
                        ecosRuinasContainer.innerHTML = contentHTML;
                        
                        // Una vez que el contenido está en la página, activamos los botones
                        attachModalListeners();
                    }

                } catch (error) {
                    console.error("Error al cargar las entradas del blog:", error);
                }
            }

            loadEntries();
            // ... (resto del script para otros modales como la Lotería, si lo tienes)
        });
    </script>
</body>
</html>
